/*!
 * Wrape v1.2.5
 * Author: Elis <contact@elis.cc>
 * License: MIT
 */
function Wrape(e,t){e=e||{};function n(e){return null==e}function r(e){for(var t of e)return!1;return!0}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e,n,r){return fetch(e,n).then((async function(e){if(t.parseResponse){var n={},a=e.headers.get("Content-Type");n={status_code:e.status,status:e.status,statusText:e.statusText,headers:e.headers};try{a&&new RegExp("application/json").test(a)?n.json=await e.json():a&&new RegExp("text/").test(a)?n.text=await e.text():n.arrayBuffer=await e.arrayBuffer()}catch(e){console.warn(e)}var o=e.ok?"Success.":"Something went wrong.";n.message=n.json&&n.json.message?n.json.message:o}else n=e;return e.ok?"function"==typeof r?r(n):n:Promise.reject(n)}))}function i(e,t){var n={[t=t||"Wrape"]:function(r){if(!(this instanceof n[t]))throw new Error("You must initalize this object using 'new' command.");Object.assign(this,e),this.def_values=r;var a=function(e){if(this instanceof a)throw new Error("You can't initalize this object.");this.def_values=e}.bind(this);return this.set=a,this}};return n[t]}function s(e){e.method="string"==typeof e.method?e.method.toUpperCase():"GET";var i={form:"multipart/form-data",url:"application/x-www-form-urlencoded",json:"application/json"},s=Object.values(i);e.enctype=i[e.enctype]||(s.includes(e.enctype)?e.enctype:s[0]);var f=["headers","body","query","path"],u={POST:"body",GET:"query"};return async function(i){var c=`${t.base}${e.path}`,d={method:e.method,headers:t.defaultHeaders,agent:t.agent},p=Object.keys(e.params),h=Array.from(arguments);h.length>1?i=h.reduce((function(e,t,n){return p[n]?(e[p[n]]=t,e):e}),{}):h[0]instanceof FormData?(i={},h[0].forEach((function(e,t){i[t]=e}))):i=1!=h.length||1!=p.length||!h[0]||h[0][p[0]]||h[0]instanceof FormData?i||{}:{[p[0]]:h[0]},this.def_values=this.def_values||{};var l={"multipart/form-data":function(){return new FormData},"application/x-www-form-urlencoded":function(){return new URLSearchParams},"application/json":function(){return{append:function(e,t){return this[e]=t},toString:function(){return JSON.stringify(this)}}}},m=l[e.enctype](),y=new URLSearchParams;for(var w in e.params){var v=e.params[w],g=i[w]||this.def_values[w]||t.defaultParamValues[w]||v.default,j=v.name||w;if(v.required&&n(g))throw(x=new Error(v.help||`The '${w}' field is required.`)).field=x.param=w,x;if(!n(g)){if("function"==typeof v.formatter||"function"==typeof v.format){var b=v.format||v.formatter;g=b(g)}if(v.validate){var x,E="function"==typeof v.validate?v.validate(g):new RegExp(v.validate).test(g);if(!E)throw(x=new Error(v.help||`The '${w}' field is invalid.`)).field=x.param=w,x}var S="string"==typeof v.location?v.location.toLowerCase():u[d.method];if(!S||!f.includes(S))throw new Error(`Invalid location for '${w}' field.`);"headers"!=S?"body"!=S?"query"!=S?"path"==S&&(c=c.replace(new RegExp(":"+a(w)),g)):y.append(j,g):m.append(j,g):(d.headers=d.headers||{},d.headers[j]=g)}}var $=y.toString();return $&&(c=`${c}?${$}`),(m.keys&&!r(m.keys())||e.enctype==s[2]&&m.toString())&&(d.body=e.enctype==s[0]?m:m.toString()),d.body&&e.enctype!==s[0]&&(d.headers=d.headers||{},d.headers["Content-Type"]=e.enctype),o(c,d,e.response)}}return t=Object.assign({base:"",defaultHeaders:{},defaultParamValues:{},parseResponse:!0,agent:!1},t),function e(t,n,r){for(var a in n){var o=n[a];if(o.hasOwnProperty("path")){var f=o;if(t._ne=!0,void 0!==t[a]){console.warn(`Skipping ${a} as it confilicts with another key in the object, avoid using keys like ('set') because they are reserved constructor words.`);continue}t[a]=s(f)}else t[a]=e({},o,a)}return t=t._ne?Object.assign(t,{set:i(t,r)}):t}({},e,!0)}!function(e,t){"function"==typeof define&&define.amd?define("wrape",[],t):"object"==typeof module&&module.exports?module.exports=t():e.Wrape=t()}("undefined"!=typeof self?self:this,(function(){return Wrape}));