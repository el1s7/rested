/*!
 * Wrape v1.1.9
 * Author: Elis <contact@elis.cc>
 * License: MIT
 */
function Wrape(e,t){e=e||{};function n(e,n,r){return fetch(e,n).then((async function(e){if(t.parseResponse){var n={},r=e.headers.get("Content-Type");n={status_code:e.status,status:e.status,statusText:e.statusText,headers:e.headers},r&&new RegExp("application/json").test(r)?n.json=await e.json():r&&new RegExp("text/").test(r)?n.text=await e.text():n.arrayBuffer=await e.arrayBuffer()}else n=e;return e.ok?n:Promise.reject(n)}))}function r(e,t){var n={[t=t||"Wrape"]:function(r){if(!(this instanceof n[t]))throw new Error("You must initalize this object using 'new' command.");Object.assign(this,e),this.def_values=r;var a=function(e){if(this instanceof a)throw new Error("You can't initalize this object.");this.def_values=e}.bind(this);return this.set=a,this}};return n[t]}function a(e){return null==e}function o(e){for(var t of e)return!1;return!0}function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){e.method="string"==typeof e.method?e.method.toUpperCase():"GET";var r=["headers","body","query","path"],s=["multipart/form-data","application/x-www-form-urlencoded","application/json"];e.enctype=e.enctype&&s.includes(e.enctype)?e.enctype:s[0];var f={POST:"body",GET:"query"};return async function(u){var c=`${t.base}${e.path}`,d={method:e.method,headers:t.defaultHeaders,agent:t.agent},p=Object.keys(e.params),h=Array.from(arguments);h.length>1?u=h.reduce((function(e,t,n){return p[n]?(e[p[n]]=t,e):e}),{}):h[0]instanceof FormData?(u={},h[0].forEach((function(e,t){u[t]=e}))):u=1!=h.length||1!=p.length||!h[0]||h[0][p[0]]||h[0]instanceof FormData?u||{}:{[p[0]]:h[0]},this.def_values=this.def_values||{};var l={"multipart/form-data":function(){return new URLSearchParams},"application/x-www-form-urlencoded":function(){return new FormData},"application/json":function(){return{append:function(e,t){return this[e]=t},toString:function(){return JSON.stringify(this)}}}},y=l[e.enctype](),m=new URLSearchParams;for(var w in e.params){var v=e.params[w],g=u[w]||this.def_values[w]||t.defaultParamValues[w]||v.default,b=v.name||w;if(v.required&&a(g))throw(x=new Error(v.help||`The '${w}' field is required.`)).field=x.param=w,x;if(!a(g)){if("function"==typeof v.formatter||"function"==typeof v.format){var j=v.format||v.formatter;g=j(g)}if(v.validate){var x,E="function"==typeof v.validate?v.validate(g):new RegExp(v.validate).test(g);if(!E)throw(x=new Error(v.help||`The '${w}' field is invalid.`)).field=x.param=w,x}var $="string"==typeof v.location?v.location.toLowerCase():f[d.method];if(!$||!r.includes($))throw new Error(`Invalid location for '${w}' field.`);"headers"!=$?"body"!=$?"query"!=$?"path"==$&&(c=c.replace(new RegExp(":"+i(w)),g)):m.append(b,g):y.append(b,g):(d.headers=d.headers||{},d.headers[b]=g)}}var S=m.toString();return S&&(c=`${c}?${S}`),(y.keys&&!o(y.keys())||y.toString().length>1)&&(d.body=e.enctype==s[0]?y:y.toString()),d.body&&e.enctype!==s[0]&&(d.headers=d.headers||{},d.headers["Content-Type"]=e.enctype),n(c,d)}}return t=Object.assign({base:"",defaultHeaders:{},defaultParamValues:{},parseResponse:!0,agent:!1},t),function e(t,n,a){for(var o in n){var i=n[o];if(i.hasOwnProperty("path")){var f=i;if(t._ne=!0,void 0!==t[o]){console.warn(`Skipping ${o} as it confilicts with another key in the object, avoid using keys like ('set') because they are reserved constructor words.`);continue}t[o]=s(f)}else t[o]=e({},i,o)}return t=t._ne?Object.assign(t,{set:r(t,a)}):t}({},e,!0)}!function(e,t){"function"==typeof define&&define.amd?define("wrape",[],t):"object"==typeof module&&module.exports?module.exports=t():e.Wrape=t()}("undefined"!=typeof self?self:this,(function(){return Wrape}));