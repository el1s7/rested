/*!
 * Rested v1.2.71
 * Author: Elis <contact@elis.cc>
 * License: MIT
 */
function Rested(e,t,n,r,o){r=r||{};o=Object.assign({base:"",headers:{},params:{},values:{},sender:!1,request_middleware:null,response_middleware:null,fetch_parse:!0,fetch_agent:!1,fetch_error_handler:!1},o);const a={form:"multipart/form-data",url:"application/x-www-form-urlencoded",json:"application/json",text:"text/plain"},i=Object.values(a),s=["headers","body","query","path"],u={POST:"body",GET:"query"},p={"multipart/form-data":function(){var e=new t;return e.toString=function(){return this},e},"application/x-www-form-urlencoded":function(){return new URLSearchParams},"application/json":function(){return{append:function(e,t){this.data=this.data||{},this.data[e]=t},toString:function(){return JSON.stringify(this.data)},isEmpty:function(){return!this.data||0==Object.keys(this.data).length}}},"text/plain":function(){return{append:function(e,t){return this.data=this.data||[],this.data.push(t)},toString:function(){return this.data.join("")},isEmpty:function(){return!this.data||0==this.data.length}}}};function l(e){return null==e}function c(e){for(var t of e)return!1;return!0}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d(t,n,r,o){return"function"==typeof r.sender?r.sender(t,n,o,r):e(t,n).then((async function(e){var a={},i=r.fetch_parse,s="function"==typeof o?o:null,u="function"==typeof r.fetch_error_handler?r.fetch_error_handler:null;try{if(i){var p=e.headers.get("Content-Type");a={status_code:e.status,status:e.status,statusText:e.statusText,headers:e.headers},p&&new RegExp("application/json").test(p)?a.json=await e.json():a.text=await e.text();var l=e.ok?"Success.":"Something went wrong.";a.message=a.json&&a.json.message?a.json.message:l}else a=e;if(!e.ok)throw a}catch(e){return u?u(e,{url:t,options:n},a):Promise.reject(e)}return s?s(a):a}))}function h(e,t,n){var r={[t=t||"Rested"]:function(o){if(!(this instanceof r[t]))throw new Error("You must initalize this object using 'new' command.");Object.assign(this,e);const a=function(e){if(this instanceof a)throw new Error("This object is already initialized.");if(e.$options){if("string"==typeof e.$options||"function"==typeof e.$options||"number"==typeof e.$options||"boolean"==typeof e.$options)throw new Error("Invalid $options object received.");Object.assign(n,e.$options),delete e.$options}n.values={...n.values,...e}}.bind(this);return this.set=a,this.set(o),this}};return r[t]}function m(e,n,r=!1){return e.method="string"==typeof e.method?e.method.toUpperCase():"GET",e.enctype=a[e.enctype]||(i.includes(e.enctype)?e.enctype:i[0]),e.params=e.params||{},async function(a){var h=n||o,m=`${h.base}${e.path}`,y={method:e.method,headers:{...h.headers},agent:h.fetch_agent},w=Object.assign({},h.params,e.params),v=Object.keys(w),g=Array.from(arguments),$=e.request||h.request_middleware,b=e.response||h.response_middleware,j=p[e.enctype](),x=new URLSearchParams;for(var O in g.length>1?a=g.reduce((function(e,t,n){return v[n]?(e[v[n]]=t,e):e}),{}):g[0]instanceof t?(a={},g[0].forEach((function(e,t){a[t]=e}))):a=1!=g.length||1!=v.length||!g[0]||g[0][v[0]]||g[0]instanceof t?a||{}:{[v[0]]:g[0]},w){var q=w[O],S=l(a[O])?q.hasOwnProperty("default")?q.default:h.values[O]||(r?q.example:void 0):a[O],E=q.name||O;if(q.required&&l(S))throw(T=new Error(q.help||`The '${O}' field is required.`)).field=T.param=O,T;if(!l(S)){if("function"==typeof q.formatter||"function"==typeof q.format){var _=q.format||q.formatter;S=_(S)}if(q.validate){var R="function"==typeof q.validate?q.validate(S):new RegExp(q.validate).test(S);if(!R)throw(T=new Error(q.help||`The '${O}' field is invalid.`)).field=T.param=O,T}var T;if(q.in&&Array.isArray(q.in)&&!q.in.includes(S))throw(T=new Error(q.help||`The '${O}' field is invalid.`)).field=T.param=O,T;var k="string"==typeof q.location?q.location.toLowerCase():u[y.method];if(!k||!s.includes(k))throw new Error(`Invalid location for '${O}' field.`);"headers"!=k?"body"!=k?"query"!=k?"path"==k&&(m=m.replace(new RegExp(":"+f(E)),S)):x.append(E,S):j.append(E,S):(y.headers=y.headers||{},y.headers[E]=S)}}var P=x.toString();P&&(m=`${m}?${P}`);var A=j.keys&&c(j.keys())||j.getLengthSync&&0==j.getLengthSync()||j.isEmpty&&j.isEmpty();if(A||(y.body=j.toString()),y.body&&e.enctype!==i[0]&&(y.headers=y.headers||{},y.headers["Content-Type"]=e.enctype),"function"==typeof $){var L=await Promise.resolve($(m,y,x,j));if(!1===L)return!1;L&&L.url&&(m=L.url),L&&L.options&&(y=returns.options)}return d(m,y,h,b)}}return function e(t,n,r,o){for(var a in n){var i=n[a];if(i&&"object"==typeof i)if(i.hasOwnProperty("path")){var s=i;if(t._ne=!0,void 0!==t[a]){console.warn(`Skipping ${a} as it confilicts with another key in the object, avoid using keys like ('set') because they are reserved constructor words.`);continue}t[a]=m(s,o)}else{if("$options"===a){var u=i;o=Object.assign({},o,u)}if("$"===a.substr(0,1))continue;t[a]=e({},i,a,o)}}return t=t._ne?Object.assign(t,{set:h(t,r,o)}):t}({$docs:async function(e,t){t={request:!0,response:!1,responseSleep:0,onlyExampleResponses:!0,showOptional:!0,commentOptional:!0,apiName:"api",headStartLevel:1,output:"./API.md",...t};const r={reference:"",body:""},a=["$options","$help"],i=function(e,n,r=!1){n=n||{};var o="";for(var a in e){var i=e[a],s=i.example||i.default||n[a]||i.type||"<any>";if(i.required||t.showOptional)if(!n[a]||!r)o+=`\t${t.commentOptional&&!i.required?"//":""}${a}: ${s="string"==typeof s?'"'+s+'"':s}, //${[i.required?"required":"optional",i.in&&Array.isArray(i.in)?"Allowed: "+i.in.join(", "):null,i.min?"Min: "+i.min:null,i.mix?"Max: "+i.max:null,i.validate?"Validate: "+("string"==typeof i.validate?i.validate:"<custom>"):null].filter((e=>e)).join(" | ")}\n`}return o},s=function(e,t,n,r){var o=n.params||{},a=Object.assign({},n.values,r.values),s="```javascript\n";return s+=`const ${e} = new ${t}.set({\n`,s+=i(o,a,!0),s+="})\n",s+="```\r\n\r\n"},u=function(e,t,n){var r="```javascript\n";return r+=e+"({\n",r+=i(t=t||{},n.values),r+="})\n",r+="```\r\n\r\n"},p=function(e,t){var n="<details>\n<summary>Request</summary>\r\n\r\n",r=(e.method||"get").toUpperCase(),o="GET"===r?"query":"body",a=e.params||{};(n+=`**${r}** ${e.path}\n`,0!==Object.keys(a))&&(n+="|Parameter|Location|Required|Description|\n|--|--|--|--|\n",n+=Object.keys(a).map((function(e){return[a[e].name||e,a[e].location||o,!!a[e].required,a[e].help].join("|")})).join("\n")+"\n");return n+="</details>\r\n\r\n"},l=async function(e,n){var r="<details>\n<summary>Response</summary>\r\n\r\n",o=e.example_response;if(!o){if(t.onlyExampleResponses)return"";var a=m(e,n,!0);try{console.log("[*] Generating response for "+e.path),await new Promise((function(e,n){setTimeout((function(){e(!0)}),t.responseSleep)})),o=(await a()).json}catch(e){return console.log(e),""}}return r+="```json\r\n",r+="string"==typeof o?o:JSON.stringify(o,null,"\t"),r+="\r\n```\r\n",r+="</details>\r\n\r\n"},c=async function(e,n,o,i,f,d=0){f+=1;var h,m=Math.min(f,6);for(var y in e)if(!a.includes(y)&&e[y]&&"object"==typeof e[y]){var w=`${i}.${y}`,v=`${o}-${y}`,g=n,$=e[y],b=$.path&&"string"==typeof $.path,j=`<h${m} id="${v}">${h=y,h.substr(0,1).toUpperCase()+h.substr(1,h.length)}</h${m}>\r\n\r\n`,x="\t".repeat(d)+`- [${y}](#${v})\r\n`,O=$.$help||$.help,q="string"==typeof O?O+"\r\n":"",S="",E="",_="",R="";$.$options&&($.$options.params&&(S=s(y,w,$.$options,n),w=y),g=Object.assign({},n,$.$options)),b&&(E=u(w,$.params,g),t.request&&(_=p($)),t.response&&(R=await l($,g))),r.reference+=x,r.body+=j+q+S+E+_+R,b||await c($,g,v,w,f,d+1)}};return await c(e,o,t.apiName,t.apiName,t.headStartLevel),n&&n.writeFileSync&&t.output&&n.writeFileSync(t.output,r.reference+"\r\n\r\n"+r.body),r}.bind(null,r)},r,!0,o)}!function(e,t){"function"==typeof define&&define.amd?define("Rested",[],t):"object"==typeof module&&module.exports?module.exports=t():e.Rested=t()}("undefined"!=typeof self?self:this,(function(){const e="object"==typeof module&&module.exports?require("node-fetch"):window.fetch,t="object"==typeof module&&module.exports?require("form-data"):window.FormData,n="object"==typeof module&&module.exports?require("fs"):null;return e?t?Rested.bind(null,e,t,n):(console.warn("FormData is not installed. If you are using Node please install form-data."),!1):(console.warn("Fetch API is not installed. If you are using Node please install node-fetch."),!1)}));